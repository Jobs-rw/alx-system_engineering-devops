#!/usr/bin/env bash

# Update package list
sudo apt-get update

# Install Nginx if not already installed
sudo apt-get install -y nginx

# Check and update Nginx configuration
if ! grep -q "listen 80;" /etc/nginx/nginx.conf; then
    sudo sed -i '/http {/a \    server {\n        listen 80;\n        # ...\n    }' /etc/nginx/nginx.conf
fi

# Restart Nginx
sudo service nginx restart

# Verify Nginx is listening on port 80
if sudo netstat -tuln | grep -q "LISTEN.*:80"; then
    echo "Nginx is now listening on port 80."
else
    echo "Nginx is not listening on port 80. Check the configuration."
fi
